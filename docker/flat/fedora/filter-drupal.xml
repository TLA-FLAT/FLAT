<?xml version="1.0" encoding="UTF-8"?>
<!--File to hold drupal connection info for the FilterDrupal servlet filter. For multisite drupal installs you can include multiple
   connection elements.  We will query all the databases and assume any user in any drupal db with the same username and password are the same
   user.  We will gather all roles for that user from all databases.  This is a potential security risk if a user in one drupal db has the same
   username and password as another user in a separate drupaldb.  We are also assuming all drupal dbs to be mysql.  This file should be located
   in the same directory as the fedora.cfcg file-->
<FilterDrupal_Connection>
  <connection server="localhost" dbname="drupal" user="fedora" password="fedora" port="5432" jdbcDriverClass="org.postgresql.Driver" jdbcURLProtocol="jdbc:postgresql">
    <sql>
       <!--Different sql statement for each connection.  This is for drupal multisites that are setup using one database with
           table prefixes.  We don't do this but some people might.-->
       SELECT DISTINCT u.uid AS userid, u.name AS Name, u.pass AS Pass, r.name AS Role FROM (users u LEFT JOIN users_roles ON
                       u.uid=users_roles.uid) LEFT JOIN role r ON r.rid=users_roles.rid WHERE u.name=? AND u.pass=?;
    </sql>
  </connection>
</FilterDrupal_Connection>
